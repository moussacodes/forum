generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id              String    @id @unique @default(cuid())
  pfp             String?
  bio             String?
  username        String    @unique
  email           String    @unique
  hashedPassword  String
  createdAt       DateTime? @default(now())
  updatedAt       DateTime? @default(now()) @updatedAt
  localization    String?
  refreshToken    String?
  verified        Boolean?  @default(false)
  badge           Int?      @default(autoincrement())
  socialLinks     String[]
  likedThreads    String[]
  dislikedThreads String[]
  likedComments   String[]
  followers       User[]    @relation("users")
  following       User[]    @relation("users")
  Thread          Thread[]
  Comment         Comment[]
}

model Thread {
  id            String    @id @unique @default(cuid())
  title         String
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  content       String
  tags          String[]
  reactionCount Int       @default(0)
  modified      Boolean   @default(false)
  userId        String
  views         Int       @default(0)
  featured      Boolean   @default(false)
  statues       String    @default("open")
  coments       Comment[]
  author        User      @relation(fields: [userId], references: [id])
}

model Comment {
  id            String   @id @unique @default(cuid())
  content       String
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  modified      Boolean  @default(false)
  userId        String
  reactionCount Int      @default(0)
  threadId      String
  thread        Thread   @relation(fields: [threadId], references: [id])
  author        User     @relation(fields: [userId], references: [id])
}
